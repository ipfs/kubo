# Kubo changelog v0.37

<a href="https://ipshipyard.com/"><img align="right" src="https://github.com/user-attachments/assets/39ed3504-bb71-47f6-9bf8-cb9a1698f272" /></a>

This release  was brought to you by the [Interplanetary Shipyard](https://ipshipyard.com/) team.

- [v0.37.0](#v0370)

## v0.37.0

- [Overview](#overview)
- [üî¶ Highlights](#-highlights)
  - [Clear provide queue when reprovide strategy changes](#clear-provide-queue-when-reprovide-strategy-changes)
  - [Named pins in `ipfs add` command](#-named-pins-in-ipfs-add-command)
  - [Removed unnecessary dependencies](#removed-unnecessary-dependencies)
- [üì¶Ô∏è Important dependency updates](#-important-dependency-updates)
- [üìù Changelog](#-changelog)
- [üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Contributors](#-contributors)

### Overview

### üî¶ Highlights

#### Clear provide queue when reprovide strategy changes

Your content sharing strategy changes now take effect cleanly, without interference from previously queued items.

When you change [`Reprovider.Strategy`](https://github.com/ipfs/kubo/blob/master/docs/config.md#reproviderstrategy) and restart Kubo, the provide queue is automatically cleared. This ensures only content matching your new strategy will be announced to the network.

A new `ipfs provide clear` command also allows manual queue clearing for debugging purposes.

> [!NOTE]
> Upgrading to Kubo 0.37 will automatically clear any preexisting provide queue. The next time `Reprovider.Interval` hits, `Reprovider.Strategy` will be executed on a clean slate, ensuring consistent behavior with your current configuration.

#### üß∑ Named pins in `ipfs add` command

Added `--pin-name` flag to `ipfs add` for assigning names to pins.

```console
$ ipfs add --pin-name=testname cat.jpg
added bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi cat.jpg

$ ipfs pin ls --names
bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi recursive testname
```

#### `Reprovider.Strategy` is now consistently respected

Prior to this version, files added, blocks received etc. were "provided" to the network (that means they were announced on the DHT) regardless of the ["reproviding strategy" setting](https://github.com/ipfs/kubo/blob/master/docs/config.md#reproviderstrategy). For example, if the strategy was set to "pinned", and `ipfs add --pin=false` was used, the file would be provided regarless. If the strategy was set to "roots" and `ipfs pin add` was used, all the blocks (not only the root) would be provided. Only the "reproviding" action (which runs every 22h by default) would respect the strategy.

Needless to say, this was innefficient as content that should not be provided was getting provided once. From now on, all operations respect `Reproviding.Strategy`. If it's set to "roots", no blocks other than pin roots will be provided regardless of what is fetched, added etc.

There's a small behaviour change:
  * When running `ipfs daemon` (in online mode)
  * And running `ipfs --offline add` (while the **online** daemon is running)
  * Then: the blocks will be provided according to the strategy where, before, the blocks were not provided. Otherwise said, the `--offline` flag in the client-command has no effect on providing anymore as the operation is controlled by the running "online" daemon and its reproviding strategy. `ipfs --offline add` used to give a performance bonus vs running it without `--offline`, but now it is performant regardless of it. To run an offline dameon you can always do `ipfs --offline daemon`. All operations against that daemon will be offline then.

#### Removed unnecessary dependencies

Kubo has been cleaned up by removing unnecessary dependencies and packages:

- Removed `thirdparty/assert` (replaced by `github.com/stretchr/testify/require`)
- Removed `thirdparty/dir` (replaced by `misc/fsutil`)
- Removed `thirdparty/notifier` (unused)
- Removed `goprocess` dependency (replaced with native Go `context` patterns)

These changes reduce the dependency footprint while improving code maintainability and following Go best practices.

#### üì¶Ô∏è Important dependency updates

- update `go-libp2p` to [v0.42.1](https://github.com/libp2p/go-libp2p/releases/tag/v0.42.1)
- update `p2p-forge/client` to [v0.6.1](https://github.com/ipshipyard/p2p-forge/releases/tag/v0.6.1)
- update `boxo` to [v0.33.1](https://github.com/ipfs/boxo/releases/tag/v0.33.1)

### üìù Changelog

### üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Contributors
