# Kubo changelog v0.35

<a href="http://ipshipyard.com/"><img align="right" src="https://github.com/user-attachments/assets/39ed3504-bb71-47f6-9bf8-cb9a1698f272" /></a>

This release  was brought to you by the [Shipyard](http://ipshipyard.com/) team.

- [v0.35.0](#v0340)

## v0.35.0

- [Overview](#overview)
- [ğŸ”¦ Highlights](#-highlights)
  - [Enhanced DAG-Shaping Controls for `ipfs add`](#enhanced-dag-shaping-controls-for-ipfs-add)
    - [New `ipfs add` Options](#new-ipfs-add-options)
    - [Persistent `Import.*` Configuration](#persistent-import-configuration)
    - [Updated Configuration Profiles](#updated-configuration-profiles)
  - [ğŸ“¦ï¸ Important dependency updates](#-important-dependency-updates)
- [ğŸ“ Changelog](#-changelog)
- [ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Contributors](#-contributors)

### Overview

### ğŸ”¦ Highlights

##### `Routing.IgnoreProviders`

This new option allows ignoring specific peer IDs when returned by the content
routing system as providers of content. See the
[documentation](https://github.com/ipfs/kubo/blob/master/docs/config.md#routingignoreproviders)
for for information.

#### Enhanced DAG-Shaping Controls for `ipfs add`

This release advances CIDv1 support by introducing fine-grained control over UnixFS DAG shaping during data ingestion with the `ipfs add` command. Kubo now allows users to customize the maximum number of links in per UnixFS block/chunk.

##### New `ipfs add` Options

Three new options allow you to override default settings for specific import operations:

- `--max-file-links`: Sets the maximum number of child links for a single file chunk.
- `--max-directory-links`: Defines the maximum number of child entries in a "basic" (single-chunk) directory.
  - Note: Directories exceeding this limit or the `Import.UnixFSHAMTDirectorySizeThreshold` are converted to HAMT-based (sharded across multiple blocks) structures.
- `--max-hamt-fanout`: Specifies the maximum number of child nodes for HAMT internal structures.

##### Persistent `Import.*` Configuration

You can set default values for these options using the following configuration settings:
- [`Import.UnixFSFileMaxLinks`](https://github.com/ipfs/kubo/blob/master/docs/config.md#importunixfsfilemaxlinks)
- [`Import.UnixFSDirectoryMaxLinks`](https://github.com/ipfs/kubo/blob/master/docs/config.md#importunixfsdirectorymaxlinks)
- [`Import.UnixFSHAMTDirectoryMaxFanout`](https://github.com/ipfs/kubo/blob/master/docs/config.md#importunixfshamtdirectorymaxfanout)
- [`Import.UnixFSHAMTDirectorySizeThreshold`](https://github.com/ipfs/kubo/blob/master/docs/config.md#importunixfshamtdirectorysizethreshold)

##### Updated Configuration Profiles

The release updated configuration [profiles](https://github.com/ipfs/kubo/blob/master/docs/config.md#profile) to incorporate these new `Import.*` settings:
- Renamed Profile: `test-cid-v1` is now `legacy-cid-v1`. This profile locks in current defaults, ensuring stability for users who prefer unchanged behavior in future releases.
- New Profile: `test-cid-v1-2025q2` adopts modern defaults, increasing the maximum file DAG width from 174 to 1024 and raising the HAMT directory sharding threshold from 256KiB to 1MiB, aligning with 1MiB file chunks.
  - Benefits: Larger blocks (256KiB to 1MiB) enable up to 4x faster Amino DHT announcements and lookups.
  - Status: This profile is a candidate for future default settings.
  - Feedback: Try it out and share your thoughts at [discuss.ipfs.tech/t/should-we-profile-cids](https://discuss.ipfs.tech/t/should-we-profile-cids/18507) or [ipfs/specs#499](https://github.com/ipfs/specs/pull/499).

> [!TIP]
> Apply the modern CIDv1 test profile with `ipfs config profile apply test-cid-v1-2025q2`.

#### ğŸ“¦ï¸ Important dependency updates

### ğŸ“ Changelog

### ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Contributors
