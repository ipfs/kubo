# Kubo changelog v0.40

<a href="https://ipshipyard.com/"><img align="right" src="https://github.com/user-attachments/assets/39ed3504-bb71-47f6-9bf8-cb9a1698f272" /></a>

This release was brought to you by the [Shipyard](https://ipshipyard.com/) team.

- [v0.40.0](#v0400)

## v0.40.0

- [Overview](#overview)
- [ğŸ”¦ Highlights](#-highlights)
  - [Routing V1 HTTP API now exposed by default](#routing-v1-http-api-now-exposed-by-default)
  - [Track total size when adding pins](#track-total-size-when-adding-pins)
  - [Improved config management for Kubernetes and containers](#improved-config-management-for-kubernetes-and-containers)
  - [ğŸ“¦ï¸ Dependency updates](#-dependency-updates)
- [ğŸ“ Changelog](#-changelog)
- [ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Contributors](#-contributors)

### Overview

### ğŸ”¦ Highlights

#### Routing V1 HTTP API now exposed by default

The [Routing V1 HTTP API](https://specs.ipfs.tech/routing/http-routing-v1/) is now exposed by default at `http://127.0.0.1:8080/routing/v1`. This allows light clients in browsers to use Kubo Gateway as a delegated routing backend instead of running a full DHT client. Support for [IPIP-476: Delegated Routing DHT Closest Peers API](https://github.com/ipfs/specs/pull/476) is included. Can be disabled via [`Gateway.ExposeRoutingAPI`](https://github.com/ipfs/kubo/blob/master/docs/config.md#gatewayexposeroutingapi).

#### Track total size when adding pins

Adds total size progress tracking of pinned nodes during `ipfs pin add --progress`. The output now shows the total size of the pinned dag.

Example output:
```
Fetched/Processed 336 nodes (83 MB)
```

#### Improved config management for Kubernetes and containers

The `--config-file` flag now works across all commands. You can store the IPFS config file separately from the repo, which is useful for:

- **Kubernetes**: Mount config from a ConfigMap while storing data on a PersistentVolume
- **Containers**: Keep config in a read-only layer while data lives in a volume

**`--init-config` vs `--config-file`:**

```console
# --init-config: copies template to $IPFS_PATH/config (one-time)
$ ipfs init --init-config /etc/ipfs/template.json
# Result: config lives at ~/.ipfs/config
# Edits to /etc/ipfs/template.json have no effect after init

# --config-file: uses external path directly (persistent)
$ ipfs init --repo-dir ~/.ipfs --config-file /etc/ipfs/config
$ ipfs daemon --repo-dir ~/.ipfs --config-file /etc/ipfs/config
# Result: no config in ~/.ipfs, always reads /etc/ipfs/config
# ConfigMap updates take effect on daemon restart
```

When initializing with a pre-existing config file, the Identity and all settings are preserved.

#### ğŸ“¦ï¸ Dependency updates

- update `go-libp2p` to [v0.46.0](https://github.com/libp2p/go-libp2p/releases/tag/v0.46.0)
  - Reduced WebRTC log noise by using debug level for pion errors ([go-libp2p#3426](https://github.com/libp2p/go-libp2p/pull/3426)).
  - Fixed mDNS discovery on Windows and macOS by filtering addresses to reduce packet size ([go-libp2p#3434](https://github.com/libp2p/go-libp2p/pull/3434)).
- update `quic-go` to [v0.57.1](https://github.com/quic-go/quic-go/releases/tag/v0.57.1) (incl. [v0.56.0](https://github.com/quic-go/quic-go/releases/tag/v0.56.0) + [v0.57.0](https://github.com/quic-go/quic-go/releases/tag/v0.57.0))
- update `p2p-forge` to [v0.7.0](https://github.com/ipshipyard/p2p-forge/releases/tag/v0.7.0)

### ğŸ“ Changelog

### ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Contributors
